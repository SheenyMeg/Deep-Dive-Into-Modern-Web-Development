(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{15:function(e,t,n){e.exports=n(37)},37:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(14),c=n.n(o),s=n(2),u=n(3),i=function(e){var t=e.onSubmit,n=(e.onClick,e.name),a=e.number,o=e.nameChange,c=e.numberChange;return r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center"}},r.a.createElement("form",{onSubmit:t,style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{type:"text",placeholder:"your name: Aan",value:n,onChange:o})),r.a.createElement("div",{style:{paddingLeft:30}},"number: ",r.a.createElement("input",{type:"text",placeholder:"your number: 14028760987",value:a,onChange:c,style:{width:200}})),r.a.createElement("button",{type:"submit",style:{marginLeft:15}},"add")))},l=function(e){var t=e.persons,n=e.onClick,a={display:"flex",justifyContent:"flex-start",alignItems:"center"},o={marginLeft:10};return r.a.createElement("div",null,t.map((function(e){return r.a.createElement("div",{key:e.id,style:a},r.a.createElement("p",null,e.name," ",e.number),r.a.createElement("button",{onClick:function(){return n(e.id)},style:o},"delete"))})))},m=function(e){var t=e.search,n=e.onChange;return r.a.createElement("div",null,"filter shown with: ",r.a.createElement("input",{type:"text",value:t,onChange:n}))},d=function(e){var t=e.notifyStatus,n={display:"none"};return"error"===t.status?r.a.createElement("h2",{style:t.show?{display:"block",color:"red",background:"lightgrey",fontSize:"15px",borderStyle:"solid",borderRadius:5,padding:10,marginbottom:10}:n},t.message):r.a.createElement("h2",{style:t.show?{display:"block",color:"green",background:"lightgrey",fontSize:"15px",borderStyle:"solid",borderRadius:5,padding:10,marginbottom:10}:n},t.message)},f=n(4),h=n.n(f),b=function(){return h.a.get("/persons").then((function(e){return e.data}))},g=function(e){return h.a.post("/persons",e).then((function(e){return e.data}))},p=function(e){return h.a.delete("".concat("/persons","/").concat(e)).then((function(e){return e.data}))},y=function(e,t){return h.a.put("".concat("/persons","/").concat(e),t).then((function(e){return e.data}))},w=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(""),f=Object(u.a)(c,2),h=f[0],w=f[1],v=Object(a.useState)(!1),E=Object(u.a)(v,2),C=E[0],j=E[1],O=Object(a.useState)({name:"",number:""}),S=Object(u.a)(O,2),k=S[0],x=S[1],L=Object(a.useState)({status:"",message:"",show:!1}),T=Object(u.a)(L,2),I=T[0],z=T[1];Object(a.useEffect)((function(){b().then((function(e){o(e)})).catch((function(e){console.log("get-error",e)}))}),[C]);var D=function(e,t){p(e).then((function(a){o(n.filter((function(t){return t.id!==e}))),z({status:"success",message:"Success deleted ".concat(t.name," was already from server"),show:!0}),setTimeout((function(){z({status:"",message:"",show:!1})}),5e3)})).catch((function(e){return console.log("delete-error",e.response.data)}))},J={color:"green"};return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h1",{style:J},"Phonebook"),r.a.createElement(d,{notifyStatus:I}),r.a.createElement(m,{search:h,onChange:function(e){if(w(e.target.value),h.length>1){var t=function(e){return n.filter((function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())>-1}))}(h);o(t)}0===h.length&&j(!C)}})),r.a.createElement("div",null,r.a.createElement("h2",{style:J},"add a new"),r.a.createElement(i,{onSubmit:function(e){e.preventDefault();var t=n.find((function(e){return e.name.toLowerCase()===k.name}));if(t){var a=window.confirm("".concat(k.name," ").concat("is already added to phonebook,replace the old number with a new one?")),r=t.id,c=Object(s.a)(Object(s.a)({},k),{},{number:k.number});a&&y(r,c).then((function(e){o(n.map((function(t){return t.id!==r?t:e}))),x({number:"",name:""}),z({status:"success",message:"Success replaced ".concat(k.name),show:!0}),setTimeout((function(){z({status:"",message:"",show:!1})}),5e3)})).catch((function(e){z({status:"error",message:"".concat(e.response.data.error),show:!0}),setTimeout((function(){z({status:"",message:"",show:!1})}),5e3),o(n.filter((function(e){return e.id!==r})))}))}else g(k).then((function(e){o(n.concat(e)),x({number:"",name:""}),z({status:"success",message:"Success added ".concat(k.name),show:!0}),setTimeout((function(){z({status:"",message:"",show:!1})}),5e3)})).catch((function(e){z({status:"error",message:"".concat(e.response.data.error),show:!0}),setTimeout((function(){z({status:"",message:"",show:!1})}),7e3)}))},name:k.name,number:k.number,nameChange:function(e){x(Object(s.a)(Object(s.a)({},k),{},{name:e.target.value})),n.find((function(e){return e.name.toLowerCase()===k.name.toLowerCase()}))&&alert("".concat(k.name," is already added to phonebook"))},numberChange:function(e){x(Object(s.a)(Object(s.a)({},k),{},{number:e.target.value})),toString(k.number).length<8&&alert("number can not less than 8 length"),n.find((function(e){return e.number===k.number}))&&alert("".concat(k.number," is already added to phonebook"))}})),r.a.createElement("div",null,r.a.createElement("h2",{style:J},"Numbers"),r.a.createElement(l,{persons:n,onClick:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.name," ?"))&&D(e,t)}})))};c.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.c5852428.chunk.js.map